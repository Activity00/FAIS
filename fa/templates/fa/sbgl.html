{% load mytags %}

<div class="col-xs-12">
	<h3 class="header smaller lighter blue">设备信息列表</h3>
	<div class="table-header">
		显示结果
	</div>
    <div class="table-responsive">
		<div id="sample-table-2_wrapper" class="dataTables_wrapper" role="grid">
			<div class="row">
				<div class="col-sm-8">
					
						<!-- 下拉框 -->
						<label>设备类型
							<select id="clzz" aria-controls="sample-table-2" size="1" name="sample-table-2_length">
								<option selected="selected" value="{{type_id}}">{{type_name}}</option>
								<option value="0">全部</option>
								{%for item in clzzs%}
								 <option value="{{item.id}}">{{item}}</option>
								{%endfor%}
							</select>
						</label>
						<label>位置
							<select id="positions" aria-controls="sample-table-2" size="1" name="sample-table-2_length">
								<!-- <option selected="selected" value="10">10</option> -->
								<option selected="selected" value="{{position_id}}">{{position_name}}</option>
								<option value="0">全部</option>
								{%for item in positions%}
									<option value="{{item.id}}">{{item}}</option>					
								{%endfor%}
							</select>
						</label>
						<button class="btn btn-xs btn-danger" id="exportexcel">
							<i class="bigger-110">导出excel</i>
						</button>
								
				</div>
				<div class="col-sm-4">
					<div id="sample-table-2_filter" class="dataTables_filter">
						<label>搜索: <input aria-controls="sample-table-2" type="text"></label>
					</div>
		      </div>
		 </div>
		<!--表格正式开始  -->
		<table aria-describedby="sample-table-2_info" id="sample-table-2" class="table table-striped table-bordered table-hover dataTable">
			<thead>
				<tr role="row">
					<th aria-label="" style="width: 53px;" colspan="1" rowspan="1" role="columnheader" class="center sorting_disabled">
						<label>
							<input id="checkmain" class="ace" type="checkbox">
							<span class="lbl"></span>
				   		</label>
					</th>
					<th aria-label="" style="width: 151px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">名称</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">类型</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">型号</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">单价</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">使用人</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">位置</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">购入时间</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting">备注</th>
					<th aria-label="" style="width: 103px;" colspan="1" rowspan="1" role="columnheader" class="sorting_disabled">状态</th>
					<th aria-label="" style="width: 168px;" colspan="1" rowspan="1" aria-controls="sample-table-2" tabindex="0" role="columnheader" class="sorting"></th>
				</tr>
			</thead>
										
			<tbody aria-relevant="all" aria-live="polite" role="alert">
				{%if info%}
				{%for item in info%}
				<tr class="odd">
					<td class="center  sorting_1">
						<label>
							<input class="ace" type="checkbox">
							<span class="lbl"></span>
						</label>
					</td>
			
					<td class=""><a href="#">{{item.name}}</a></td>
					<td class="">{{item.type}}</td>
					<td class="hidden-480 ">{{item.modelType}}</td>
					<td class="hidden-480 ">{{item.price}}</td>
					<td class="hidden-480 ">{{item.user}}</td>
					<td class="hidden-480 ">{{item.position}}</td>
					<td class="hidden-480 ">{{item.purchasetime}}</td>
					<td class="hidden-480 ">{{item.remark}}</td>
					<td class="hidden-480 "> 
						{%if item.stats%}
						<span class="label label-sm label-success">已发布</span>
						{%else%}
						<span class="label label-sm label-warning">未发布</span>
						{%endif%}
					</td>
					<!-- 操作的小图标 -->
					<td class="">
						<div class="visible-md visible-lg hidden-sm hidden-xs action-buttons">
							 <a class="green" id="publish" name="" href="#">
								  <i class="icon-pencil bigger-130"></i>
							</a>
							
							<a class="red" href="#" id="id-btn-dialog2">
								<i class="icon-trash bigger-130"></i>
							</a>
						</div>
					</td>
			 	</tr>
				{%endfor%}
				{%endif%}
			</tbody>
	   </table>
	  <div class="row">
		<div class="col-sm-6">
			<div id="sample-table-2_info" class="dataTables_info">
				共{{info|length}}条</div>
			</div>
			<div class="col-sm-6">
			<div class="dataTables_paginate paging_bootstrap">
				
				<ul class="pagination">
					<li><a href="?page=1">首页</a></li>
					<li>
					{%if res.has_previous%}
					<a href="?page={{bbs_list.previous_page_number}}">上一页</a>
						{%endif%}
					</li>
					{%pagination res 10  5 as page_list%}
					{%autoescape off%}
					{{page_list}}
					{%endautoescape%}
				
					<li>
					{%if res.has_next%}
						<a href="page={{res.next_page_number}}">下一页</a>
					{%endif%}
					</li>
					<li>
						<a href="?page={{res.paginator.num_pages}}">尾页</a>
					</li>
				</ul>
		 </div> 
		</div>
	 </div>
	</div>
  </div>
</div>
<!--对话据昂  -->
<div id="dialog-confirm" class="hide">
			<div class="alert alert-info bigger-110">
					删除将不能恢复！
			</div>
			<div class="space-6"></div>
				<p class="bigger-110 bolder center grey">
				 	<i class="icon-hand-right blue bigger-120"></i>
					确定删除吗?
				</p>
		</div>
<!--对话框结束  -->

<script type="text/javascript">
jQuery(function($) {
	$("#clzz").change(function(){
		var a=$("#clzz option:selected").attr("value");
		var b=$("#positions option:selected").attr("value");
		window.location ="?type_id="+a+"&position_id="+b;
	});
	$("#positions").change(function(){
		var a=$("#clzz option:selected").attr("value");
		var b=$("#positions option:selected").attr("value");
		window.location ="?type_id="+a+"&position_id="+b;
	});
	
	$("#exportexcel").click(function(){
		var a=$("#clzz option:selected").attr("value");
		var b=$("#positions option:selected").attr("value");
		window.location = "{%url 'fa:exportexcel'%}"+"?type_id="+a+"&position_id="+b;
	});
	
	$("input#checkmain").bind("click",function(){
		alert($("input#checkmain").attr("checked"));
	    if($("input#checkmain").attr("checked")==undefined){
	    	$("[type='checkbox']").attr("checked",true);
	    }else{
	    	$("[type='checkbox']").attr("checked",undefined);
	    }
	 }); 
	
	/* $("input#checkmain").toggle(function(){
		$("[type='checkbox']").attr("checked",ture);
		alert("1");
	},function(){
		$("[type='checkbox']").attr("checked",);
		alert("2");
	}); */
	/* $("input#checkmain").attr("checked",function(index,oldvalue){
	alert(oldvalue);
}); */
 
//全选
	/* 对话框开始 */		
	//override dialog's title function to allow for HTML titles
				$.widget("ui.dialog", $.extend({}, $.ui.dialog.prototype, {
					_title: function(title) {
						var $title = this.options.title || '&nbsp;'
						if( ("title_html" in this.options) && this.options.title_html == true )
							title.html($title);
						else title.text($title);
					}
				}));
			
				$( "#id-btn-dialog2" ).on('click', function(e) {
					e.preventDefault();
				
					$( "#dialog-confirm" ).removeClass('hide').dialog({
						resizable: false,
						modal: true,
						title: "<div class='widget-header'><h4 class='smaller'><i class='icon-warning-sign red'></i>确认删除吗？</h4></div>",
						title_html: true,
						buttons: [
							{
								html: "<i class='icon-trash bigger-110'></i>&nbsp; 删除所选条目",
								"class" : "btn btn-danger btn-xs",
								click: function() {
									$( this ).dialog( "close" );
								}
							}
							,
							{
								html: "<i class='icon-remove bigger-110'></i>&nbsp; 取消",
								"class" : "btn btn-xs",
								click: function() {
									$( this ).dialog( "close" );
								}
							}
						]
					});
				});
				
	/*对话框结束  */
	
	
});
</script>